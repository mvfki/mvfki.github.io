<!DOCTYPE HTML>
<!--
Ion by TEMPLATED
templated.co @templatedco
Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
--><html>
<head>
<title>Code Highlighting Test - WYC's Blog</title>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<meta content="" name="description"/>
<meta content="" name="keywords"/>
<!--[if lte IE 8]><script src="js/html5shiv.js"></script><![endif]-->
<style type="text/css">
			.hidden {display:none;}
		</style>
<script src="/js/jquery.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/skel-layers.min.js"></script>
<script src="/js/init.js"></script>
<link href="/images/icon.png" rel="shortcut icon" type="image/png"/>
<link href="/css/highlight.css" rel="stylesheet" type="text/css"/>
<script src="/js/smoothscroll.min.js"></script>
<script async="" id="dsq-count-scr" src="//mvfki.disqus.com/count.js"></script>
<script crossorigin="anonymous" src="https://kit.fontawesome.com/6168edb86f.js"></script>
<link href="/css/dark.css" rel="stylesheet"/>
<noscript>
<link href="/css/skel.css" rel="stylesheet"/>
<link href="/css/style.css" rel="stylesheet"/>
<link href="/css/style-xlarge.css" rel="stylesheet"/>
</noscript>
<style>
header.major {
	text-align: center;
	margin: 0 0 4em 0;
	background-image: linear-gradient(rgba(100, 100, 100, 0.4), rgba(100, 100, 100, 0.4)), url(/blog/coding/images/banner.png);
	padding: 6em 0 4em 0;
	background-position: left center;
	background-size: cover;
	opacity: 0.8;
}
	header.major h2 {
		color: white;
	}
	header.major p {
		color: white;
	}
.wrapper {
	padding: 0 0 0 0;
}
		</style>
</head>
<body class="hidden" id="top">
<!-- Header -->
<header class="skel-layers-fixed" id="header">
<h1><a href="/">WYC - Home Page</a></h1>
<nav id="nav">
<ul>
<li><a href="/">Home</a></li>
<li class="dropdown" id="blogMenu">
<a href="/blog">Blog</a>
<ul class="dropdownContent" id="dropdownContent">
<li><a href="/blog/coding">Coding</a></li>
<li><a href="/blog/music">Music</a></li>
<li><a href="/blog/anime">Anime</a></li>
<li><a href="/blog/cooking">Cooking</a></li>
</ul>
</li>
<li><a href="https://github.com/mvfki">GitHub</a></li>
<li><a href="https://bangumi.tv/user/541876">Bangumi</a></li>
</ul>
</nav>
</header>
<!-- Main -->
<section class="wrapper style1" id="main">
<header class="major">
<h2>Yichen's Coding Notes</h2>
<p>Some experience and complains ;D</p>
</header>
<nav id="content-nav"><ul><li class="tag-h1"><a href="#code-highlighting-test">Code Highlighting Test</a></li><li class="tag-h2"><a href="#demonstrations">Demonstrations</a></li><li class="tag-h3"><a href="#python3">Python3</a></li><li class="tag-h3"><a href="#bash">Bash</a></li><li class="tag-h2"><a href="#python-markdown-module-with-code-syntax-highlighting">Python Markdown Module with Code Syntax Highlighting</a></li></ul></nav>
<div class="container post">
<a href="/blog">Blog</a><span>  /  </span><a href="/blog/coding">Coding</a>
</div>
<div class="container" id="articleDiv">
<!-- Articles -->
<section><div class="post"><span>2020-07-14</span><h1 id="code-highlighting-test">Code Highlighting Test</h1><p>Code syntax highlighting for this site is powered by <a href="https://pygments.org/">Pygments</a> and <a href="https://facelessuser.github.io/pymdown-extensions/">pymdown-extensions</a>, which basically works in a local deploying manner.  </p><p>The light mode color scheme used is a contrast enhanced version of Sublime's "Breakers", while the dark mode color scheme used is "Monokai". Light and dark themes synchronize with your device system settings (only tested on Windows 10 PC and iOS13).  </p><h2 id="demonstrations"><a class="anchor" href="#demonstrations" id="anchor-demonstrations"><i aria-hidden="true" class="fas fa-link"></i></a>Demonstrations</h2><h3 id="python3"><a class="anchor" href="#python3" id="anchor-python3"><i aria-hidden="true" class="fas fa-link"></i></a>Python3</h3><div class="highlight"><pre><span></span><code><span class="sd">"""</span>
<span class="sd">docstring</span>
<span class="sd">"""</span>
<span class="kn">from</span> <span class="nn">bar</span> <span class="kn">import</span> <span class="n">foo</span>
<span class="kn">import</span> <span class="nn">bar2</span> <span class="k">as</span> <span class="nn">b2</span>

<span class="kd">class</span> <span class="nc">myClass1</span><span class="p">(</span><span class="nci">object</span><span class="p">):</span>
    <span class="sd">"""docstring"""</span>
    <span class="kd">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="ka">self</span><span class="p">,</span> <span class="ka">var1</span><span class="p">,</span> <span class="ka">var2</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">"""Initialize"""</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">var1</span> <span class="o">=</span> <span class="n">var1</span>
        <span class="c1"># random hash comment</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">var2</span> <span class="o">=</span> <span class="n">var2</span>

    <span class="kd">def</span> <span class="nf">classMethod1</span><span class="p">(</span><span class="ka">self</span><span class="p">,</span> <span class="ka">n</span><span class="p">):</span>
        <span class="k">return</span> <span class="kl">lambda</span> <span class="ka">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">n</span>

    <span class="o">@</span><span class="nb">property</span>
    <span class="kd">def</span> <span class="nf">Var3</span><span class="p">(</span><span class="ka">self</span><span class="p">,</span> <span class="ka">mat1</span><span class="p">,</span> <span class="ka">mat2</span><span class="p">):</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="n">mat1</span> <span class="o">@</span> <span class="n">mat2</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">mat</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="kt">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="sa sa-Debug">r</span><span class="s1 s1-Raw">'</span><span class="sr">(?i)</span><span class="s1 s1-Raw">(</span><span class="se">?&lt;!</span><span class="s1 s1-Raw">a)</span><span class="srb">[.*?!]</span><span class="s1 s1-Raw">mvfk</span><span class="c">(?#Yo)</span><span class="s1 s1-Raw">i</span><span class="sr">{1,2}</span><span class="s1 s1-Raw">}</span><span class="s1">'</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">var1</span> <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">var2</span>

<span class="kd">def</span> <span class="nf">myFun</span><span class="p">(</span><span class="ka">a</span><span class="p">:</span> <span class="kt">str</span><span class="p">,</span> <span class="ka">b</span><span class="p">:</span> <span class="kt">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="kt">str</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nfc">foo</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)):</span>
        <span class="n">a</span> <span class="o">+=</span> <span class="kt">str</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">mc</span> <span class="o">=</span> <span class="nfc">myClass1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">mc</span><span class="p">.</span><span class="nfc">classMethod1</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">33</span><span class="p">)</span> <span class="o">+</span> <span class="n">mc</span><span class="p">.</span><span class="n">Var3</span>
    <span class="n">a</span> <span class="o">=</span> <span class="nfc">myFun</span><span class="p">(</span><span class="s1">'Hello'</span><span class="p">,</span> <span class="ka">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="sa">f</span><span class="s1">'fstring</span><span class="si">{</span><span class="mf">1.23</span><span class="si">}</span><span class="s1">'</span><span class="p">,</span> <span class="s1">'Format </span><span class="si">{}</span><span class="s1">.'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="mi">233</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"and </span><span class="si">%s</span><span class="s2"> like </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="s2">"something"</span><span class="p">,</span> <span class="s2">"this"</span><span class="p">))</span>
</code></pre></div><h3 id="bash"><a class="anchor" href="#bash" id="anchor-bash"><i aria-hidden="true" class="fas fa-link"></i></a>Bash</h3><div class="highlight"><pre><span></span><code><span class="nv">files_list</span><span class="o">=</span><span class="p">(</span> <span class="s2">"a.txt"</span> <span class="s2">"b.txt"</span> <span class="s2">"c and space.txt"</span> <span class="p">)</span>
<span class="nv">GREETING</span><span class="o">=</span><span class="s">Yoooooo</span>
<span class="nf">echo_greeting</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">echo</span> <span class="nv">$1</span>
<span class="p">}</span>
<span class="k">for</span> i <span class="k">in</span> <span class="s2">"</span><span class="si">${</span><span class="nv">files_list</span><span class="p">[</span><span class="o">@</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="o">;</span> <span class="k">do</span>
    <span class="k">if</span> <span class="p">[</span> <span class="ka">-f</span> <span class="s2">"</span><span class="nv">$i</span><span class="s2">"</span> <span class="p">]</span><span class="o">;</span> <span class="k">then</span>
        <span class="nb">head</span> <span class="ka">-n5</span> <span class="s2">"</span><span class="nv">$i</span><span class="s2">"</span> <span class="o">|</span> <span class="nb">grep</span> <span class="nv">$GREETING</span> <span class="o">&gt;&gt;</span> all_greetings.txt
    <span class="k">else</span> 
        echo_greeting <span class="nv">$GREETING</span>
    <span class="k">fi</span>
<span class="k">done</span>
</code></pre></div><p>Pygment highlighting performance is much better than Google's <a href="https://github.com/googlearchive/code-prettify">code-prettify</a> that I adopted previously. However, none of these beats Sublime's highlighting strategy, in terms of syntax detection.  </p><p>Currently, I have already implemented my customized Python syntax detection library, at <a href="https://github.com/mvfki/pyHiliter">pyHiliter</a>, which work as a Pygments plugin, and can be directly adopted by PyMdown Extensions.</p><p>(Will be updated for other languages if needed. It might happen other languages are presented in other articles of mine.)  </p><h2 id="python-markdown-module-with-code-syntax-highlighting"><a class="anchor" href="#python-markdown-module-with-code-syntax-highlighting" id="anchor-python-markdown-module-with-code-syntax-highlighting"><i aria-hidden="true" class="fas fa-link"></i></a>Python Markdown Module with Code Syntax Highlighting</h2><p>First I would like to clarify that, due to the method I implemented this blog site, an almost fully DIY way, this might be hard to work for other deployment tool users.  </p><p>Dependencies needed can be installed with the following command. I tried a few of other alternatives and found these ones most match my expectations. For my customized Python detection, refer to the repo's <a href="https://github.com/mvfki/pyHiliter#pyhiliter---improved-pygments-pythonlexer">README</a>. </p><div class="highlight"><pre><span></span><code><span class="nb">pip</span> install markdown pymdown-extensions Pygments
</code></pre></div><p>In Python3 deployment code:  </p><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">markdown</span>

<span class="c1"># Here I only list the extension needed for syntax highlighting</span>
<span class="c1"># Other extensions may also be necessary for other Markdown-to-HTML </span>
<span class="c1"># features, such as inserting an "id" attribute to header elements. </span>
<span class="n">EXT</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'pymdownx.superfences'</span><span class="p">]</span>

<span class="kd">def</span> <span class="nf">md_to_HTML</span><span class="p">(</span><span class="ka">filename</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    Reads a Markdown file directly and returns HTML text</span>
<span class="sd">    '''</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">raw_MD_text</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="nfc">read</span><span class="p">()</span>
    <span class="n">f</span><span class="p">.</span><span class="nfc">close</span><span class="p">()</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">markdown</span><span class="p">.</span><span class="nfc">markdown</span><span class="p">(</span><span class="n">raw_MD_text</span><span class="p">,</span> <span class="ka">extensions</span><span class="o">=</span><span class="n">EXT</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">html</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">HTML</span> <span class="o">=</span> <span class="nfc">md_to_HTML</span><span class="p">(</span><span class="s1">'my_post.md'</span><span class="p">)</span>
    <span class="c1"># And then you will insert this HTML element into a template document. </span>
    <span class="c1"># BeautifulSoup4 is recommended. </span>
</code></pre></div></div></section></div>
<div class="container post operation" id="lowerOperation">
<hr/>
<!--Last  &  Next-->
<a class="operation button" href="../some-understandings-of-personal-static-blog" id="lastBtn">Last</a>
<a class="operation button right" href="../simple-way-to-enable-dark-mode-theme" id="nextBtn">Next</a>
<hr/>
</div>
</section>
<div class="container comment">
<h2>Comments</h2>
<div id="disqus_thread"></div>
</div>
<script id="disqusConfig">
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
var disqus_config = function () {
	this.page.url = "https://mvfki.github.io/blog/coding/code-highlighting-test/";  // Replace PAGE_URL with your page's canonical URL variable
	this.page.identifier = "code-highlighting-test"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://mvfki.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
		</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<div class="corner">
<i class="fa fa-angle-double-up fa-4x"></i>
</div>
<!-- Footer -->
<footer id="footer">
<div class="container">
<div class="copyright row">
<div class="left">
<p><span class="bold">What is "mvfki"?</span><br/>
							"mvfki" does not linguistically mean anything.<br/>
							Try type it letter by letter on your keyboard, <br/>
							and you will feel comfortable with it:)</p>
</div>
<div class="right">
<br/><p>© Yichen Wang, 2020.
						<br/>Design: <a href="http://templated.co">TEMPLATED</a></p>
</div>
</div>
</div>
</footer>
<script src="/js/utils.js"></script>
</body>
</html>