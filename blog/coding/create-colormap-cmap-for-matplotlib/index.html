<!DOCTYPE HTML>
<!--
Ion by TEMPLATED
templated.co @templatedco
Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
--><html>
<head>
<title>Create Colormap (cmap) for Matplotlib - WYC's Blog</title>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<meta content="" name="description"/>
<meta content="" name="keywords"/>
<!--[if lte IE 8]><script src="js/html5shiv.js"></script><![endif]-->
<script src="/js/jquery.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/skel-layers.min.js"></script>
<script src="/js/init.js"></script>
<script src="/js/posts.js"></script>
<link href="/images/icon.png" rel="shortcut icon" type="image/png"/>
<link href="/prettify/prettify.css" rel="stylesheet" type="text/css"/>
<script src="/prettify/prettify.js" type="text/javascript"></script>
<noscript>
<link href="/css/skel.css" rel="stylesheet"/>
<link href="/css/style.css" rel="stylesheet"/>
<link href="/css/style-xlarge.css" rel="stylesheet"/>
</noscript>
<style>
header.major {
	text-align: center;
	margin: 0 0 4em 0;
	background-image: linear-gradient(rgba(100, 100, 100, 0.4), rgba(100, 100, 100, 0.4)), url(/blog/coding/images/banner.png);
	padding: 6em 0 4em 0;
	background-position: left center;
	background-size: cover;
	opacity: 0.8;
}
	header.major h2 {
		color: white;
	}
	header.major p {
		color: white;
	}
.wrapper {
	padding: 0 0 0 0;
}
		#set-with-exact-color-label-for-each-point:hover #anchor-set-with-exact-color-label-for-each-point i {
	visibility: visible;
}
#project-continuous-values-to-cmap:hover #anchor-project-continuous-values-to-cmap i {
	visibility: visible;
}
#implementation-of-more-flexible-cmap:hover #anchor-implementation-of-more-flexible-cmap i {
	visibility: visible;
}
</style>
</head>
<body id="top">
<!-- Header -->
<header class="skel-layers-fixed" id="header">
<h1><a href="/">WYC - Home Page</a></h1>
<nav id="nav">
<ul>
<!--<li>Select Month</li>
					<li>
						<select id="selMonth" name="selMonth" onchange="showMonth();">
							<option selected="" value="all">All</option>
						</select>
					</li>-->
<li><a href="/">Home</a></li>
<li class="dropdown" id="blogMenu">
<a href="/blog">Blog</a>
<ul class="dropdownContent" id="dropdownContent">
<li><a href="/blog/coding">Coding</a></li>
<li><a href="/blog/music">Music</a></li>
<li><a href="/blog/anime">Anime</a></li>
<li><a href="/blog/cooking">Cooking</a></li>
</ul>
</li>
<li><a href="https://github.com/mvfki">GitHub</a></li>
<li><a href="https://bangumi.tv/user/541876">Bangumi</a></li>
</ul>
</nav>
</header>
<!-- Main -->
<section class="wrapper style1" id="main">
<header class="major">
<h2>Yichen's Coding Notes</h2>
<p>Some experience and complains ;D</p>
</header>
<div class="container">
<a href="/blog">Blog</a><span>  /  </span><a href="/blog/coding">Coding</a>
</div>
<div class="container" id="articleDiv">
<!-- Articles -->
<section><div class="image post"><h1 id="create-colormap-cmap-for-matplotlib">Create Colormap (cmap) for Matplotlib</h1><p>When plotting, people definitely care about the color of the dots in there scatter plots. </p><pre class="prettyprint"><code class="python">import matplotlib.pyplot as plt
# For example, the 2-D data we want to plot comes this way
x, y = list(range(100)), list(range(100))
</code></pre><p>Usually there are two ways to set this feature:  </p><h2 id="set-with-exact-color-label-for-each-point"><a class="anchor" href="#set-with-exact-color-label-for-each-point" id="anchor-set-with-exact-color-label-for-each-point"><i aria-hidden="true" class="icon fa-link"></i></a>Set with exact color label for each point</h2><p>Know the exact color representation of each dot and give it to <code>color</code> argument</p><pre class="prettyprint"><code class="python">plt.scatter(x, y, color=['red', 'blue']*50)
plt.show()
</code></pre><p><img alt="redBlue color setting" src="4.jpg"/>
Note that you can also say <code>color='red'</code> for set all dots to "red".<br/>
This way is usually used when you have run some sort of unsupervised learning on your dataset, and in result you get a list of label for the sample points. Then you will usually plot the top variable components of your dataset, and throw the list of label to <code>color</code>. </p><h2 id="project-continuous-values-to-cmap"><a class="anchor" href="#project-continuous-values-to-cmap" id="anchor-project-continuous-values-to-cmap"><i aria-hidden="true" class="icon fa-link"></i></a>Project continuous values to <code>cmap</code></h2><p>When you have some sort of continuous value, and you want a color gradient to reflect the value, set <code>c</code> to this value and use <code>cmap</code> to choose the color palette.  </p><pre class="prettyprint"><code class="python">c = list(range(100))
plt.scatter(x, y, c=c, cmap='Pastel1')
plt.show()
</code></pre><p><img alt="Pastel cmap" src="5.jpg"/>
A classic scenario is that in Bioinformatics, when you have a PCA embedding of a set of samples and you plot the top two components as the <code>x</code> and <code>y</code> dimension, and then you want to use the color to represent the expression level of a gene of interests for these samples, you can directly throw the array of expression value to <code>c</code>.  </p><h2 id="implementation-of-more-flexible-cmap"><a class="anchor" href="#implementation-of-more-flexible-cmap" id="anchor-implementation-of-more-flexible-cmap"><i aria-hidden="true" class="icon fa-link"></i></a>Implementation of more flexible <code>cmap</code></h2><p>However, though there has already been a long list of preset colormaps in matplotlib (use <code>dir(matplotlib.cm)</code> to have a quick look, this also gives you other functions and constants though), I still think it's good to have an access to define customized colormap with maximum flexibility. Therefore, I wrote myself a simple script for this functionality, which you can find <a href="https://github.com/mvfki/assignments/blob/master/matplotlib_cmap_generator.py">here</a>. Detailed documents and usage has already been stated in the script. Let's have a quick check on the example data above.  </p><pre class="prettyprint"><code class="python">from matplotlib_cmap_generator import generateCmap
cmap1 = generateCmap(['blue', 'white', 'red'])
cmap2 = generateCmap(['blue', 'red', 'yellow', 'green'], [0, 1, 2, 6])
cms = [cmap1, cmap2]
fig, axs = plt.subplots(1, 2, figsize=(6, 3), constrained_layout=True)
for [ax, cmap] in zip(axs, cms):
    ax.scatter(x, y, c=x, cmap=cmap)
plt.show()
</code></pre><p><img alt="Customized cmap" src="6.png"/>
So the point of this function is that, you can set gradients varying from any colors you have in mind, and you can set as many colors as you can identify. Furthermore, the width of the interval of each gradient can also be set by the second argument, which stands for the relative value that each color should occur.  </p><p>Jul. 1st, 2020  </p></div></section></div>
<hr/>
<div class="container operation" id="lowerOperation">
<!--Last  &  Next-->
<a class="operation button" href="../updating-posts-more-easily" id="lastBtn">Last</a>
<a class="operation button right disabled" id="nextBtn">Next</a>
</div>
<script>
PR.prettyPrint();
			</script>
</section>
<div class="corner">
<i class="fa fa-angle-double-up fa-4x"></i>
</div>
<!-- Footer -->
<footer id="footer">
<div class="container">
<ul class="copyright">
<li>Â© WYC. All rights reserved.</li>
<li>Design:	<a href="http://templated.co">TEMPLATED</a></li>
</ul>
</div>
</footer>
</body>
</html>